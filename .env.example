# -----------------------------------------------------------------------------
# Authentication (OpenID Connect / Keycloak)
# -----------------------------------------------------------------------------

# The OpenID Connect Issuer URL.
# The application will use this to discover endpoints (.well-known/openid-configuration).
# Example (Local): http://localhost:8080/realms/myrealm
# Note: If running in Docker, ensure this URL is reachable from the Next.js container.
OIDC_ISSUER=

# The Client ID registered in Keycloak for this application.
# Ensure "Client Authentication" is enabled (ON) in Keycloak for confidential clients.
OIDC_CLIENT_ID=

# The Client Secret for the confidential client.
# DO NOT commit the actual secret to the repository.
OIDC_CLIENT_SECRET=

# The Redirect URI (Callback URI) where Keycloak sends the user after login.
# This must match the "Valid Redirect URIs" setting in Keycloak exactly.
# Example: http://localhost:3000/api/auth/callback
OIDC_CALLBACK_URI=

# The URI where the user is redirected after a successful logout.
# This must be listed in "Valid Post Logout Redirect URIs" (or "Valid Redirect URIs" in older Keycloak).
# Example: http://localhost:3000
POST_LOGOUT_REDIRECT_URI=

# [Optional] OIDC Scopes
# Specify the scopes required by your application and backend APIs.
# 'offline_access' is usually required for Refresh Tokens.
OIDC_SCOPE="openid offline_access"

# -----------------------------------------------------------------------------
# Session Storage (Redis / Valkey)
# -----------------------------------------------------------------------------
# You can configure the connection using either [Option 1] or [Option 2].
# If REDIS_URL is set, it will typically take precedence over individual parameters.

# [Option 1] Connection String (Recommended for PaaS / Production)
# Example: redis://:password@localhost:6379/0
# Example: rediss://user:password@aws-elasticache-endpoint:6379 (Use 'rediss://' for TLS)
REDIS_URL=

# [Option 2] Individual Parameters (Recommended for Local Dev / Docker)
# These are used as a fallback if REDIS_URL is empty.
REDIS_HOST=localhost
REDIS_PORT=6379

# [Authentication]
# Leave empty if authentication is not required (e.g., local development).
# REDIS_USERNAME is required only when using ACLs (e.g., AWS ElastiCache with RBAC).
REDIS_USERNAME=
REDIS_PASSWORD=

# [Security]
# Set to "true" if TLS/SSL connection is required (e.g., AWS ElastiCache, Upstash).
# Note: If you use 'rediss://' in REDIS_URL, TLS is usually auto-detected,
# but you can use this variable to force enable it.
REDIS_USE_TLS=false

# -----------------------------------------------------------------------------
# Backend API Configuration
# -----------------------------------------------------------------------------

# Base URL for the main Resource Server (Backend API).
# Used by the Next.js server (BFF) to forward requests.
# Example (Local): http://localhost:8080
# Example (Docker): http://backend-api:8080
API_BASE_URL=

# If you have multiple microservices, define them here:
# USER_SERVICE_URL=http://user-service:8080
# PAYMENT_SERVICE_URL=http://payment-service:8080
